using UnityEngine;

public class ClickManager : MonoBehaviour
{
    public int vidaJugador = 3;
    public GameObject[] objetosValidos;

    void Update()
    {
        if (Input.GetMouseButtonDown(0)) // Click izquierdo
        {
            Vector2 mousePos = Camera.main.ScreenToWorldPoint(Input.mousePosition);
            Collider2D col = Physics2D.OverlapPoint(mousePos);

            if (col != null && EsObjetoValido(col.gameObject))
            {
                Debug.Log("¡Click correcto en: " + col.gameObject.name + "!");
                // Puedes hacer algo aquí como restar vida al objeto
            }
            else
            {
                vidaJugador--;
                Debug.Log("¡Click incorrecto! Vida del jugador: " + vidaJugador);
            }
        }
    }

    bool EsObjetoValido(GameObject obj)
    {
        foreach (GameObject valido in objetosValidos)
        {
            // Comparamos por instancia exacta
            if (obj == valido)
                return true;

            // O comparamos si es hijo de uno de los válidos
            if (obj.transform.IsChildOf(valido.transform))
                return true;
        }
        return false;
    }
}
